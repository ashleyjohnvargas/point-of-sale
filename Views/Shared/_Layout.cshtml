<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />

	<!-- Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="~/css/style.css" asp-append-version="true">
	<!-- Boxicons -->
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
	<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>

	<!-- Font Awesome (for the arrow icon) -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

	<!-- Boxicons (for the password toggle icons) -->
	<link href="https://cdn.jsdelivr.net/npm/boxicons@2.1.2/css/boxicons.min.css" rel="stylesheet">




	<title>Gizmode POS System</title>


	<!-- My CSS -->
	<style>
		a {
			text-decoration: none;
			font-size: 16px;
		}

			a:hover {
				/* /text-decoration: underline; /* Adds an underline only on hover */ color: #007bff; /* Changes color on hover */
			}

		.side-menu a {
			font-size: 1rem; /* Adjust to match your design */
			text-decoration: none;
		}

		.welcome-message {
			position: absolute;
			top: 20px;
			right: 30px;
			font-size: 18px;
			color: #954bd6;
			font-weight: 500;
		}
		/* Change icon color */
		/* .toggle-password i { */
		/* 	color: #954bd6; /* Change to any color you prefer */ */
		/* } */
		.toggle-password i {
			color: #555; /* Dark gray */
			font-size: 1.2rem;
		}


		/* Optionally, change the size of the icon */
		.toggle-password i {
			font-size: 20px; /* Adjust the size if necessary */
		}

		/* Optional: Change color on hover */
		.toggle-password:hover i {
			color: #007bff; /* Color when hovering over the icon */
		}

		.toggle-password {
			position: absolute;
			top: 50%; /* Center vertically */
			right: 15px; /* Space from the right */
			transform: translateY(-50%);
			cursor: pointer;
			color: #888; /* Icon color */
		}

		/* Basic Styling for Modal */
		#logoutModal {
			display: none; /* Initially hidden */
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.5); /* Dark background */
			justify-content: center;
			align-items: center;
		}

			#logoutModal > div {
				margin: 20% auto;
				padding: 20px;
				background: white;
				width: 300px;
				text-align: center;
				border-radius: 8px;
			}

			/* Optional styling for buttons */
			#logoutModal button {
				margin: 10px;
			}
	</style>
</head>
<body>



	<!-- SIDEBAR -->
	<section id="sidebar">
		<a asp-controller="Home" asp-action="Index" class="brand">
			<i class='bx bxs-calculator'></i>
			<!-- <box-icon name='calculator'></box-icon> -->
			<span class="text">GizmodePOS</span>
		</a>
		<ul class="side-menu top">
			<li>
				<a asp-controller="Home" asp-action="Index">
					<i class='bx bxs-dashboard'></i>
					<span class="text">Dashboard</span>
				</a>
			</li>

			<li>
				<a asp-controller="Orders" asp-action="Orders">
					<i class='bx bxs-message-dots'></i>
					<span class="text">Orders</span>
				</a>
			</li>

			<li>
				<a asp-controller="Checkout" asp-action="BlankCheckout">
					<i class='bx bxs-shopping-bag-alt'></i>
					<span class="text">Checkout</span>
				</a>

			</li>

			<li>
				<a asp-controller="Sales" asp-action="Sales">
					<i class='bx bxs-shopping-bag'></i>
					<span class="text">Sales</span>
				</a>
			</li>

			<li>
				<a asp-controller="Profile" asp-action="ProfilePage">
					<i class='bx bxs-image'></i>
					<span class="text">Profile</span>
				</a>
			</li>
			<li>
				<a asp-controller="Users" asp-action="Users">
					<i class='bx bxs-group'></i>
					<span class="text">Users</span>
				</a>
			</li>
		</ul>

		<ul class="side-menu">
			@if (Context.Session.GetString("UserId") != null)
			{
				<li>
					<a asp-controller="Home" asp-action="Logout" class="logout" onclick="return confirmLogout();" ;>
						<i class='bx bxs-log-out-circle'></i>
						<span class="text">Logout</span>
					</a>
				</li>
			}
			else
			{
				<li><a asp-controller="Login" asp-action="LoginPage">Login</a></li>
			}

			@* <li> *@
			@* 	<a asp-controller="Home" asp-action="Logout" class="logout" onclick="return confirmLogout();" ;> *@
			@* 		<i class='bx bxs-log-out-circle'></i> *@
			@* 		<span class="text">Logout</span> *@
			@* 	</a> *@
			@* </li> *@
		</ul>

		@* <ul class="side-menu"> *@
		@* 	<li> *@
		@* 		<a href="#" class="logout" onclick="showModal(event)"> *@
		@* 			<i class='bx bxs-log-out-circle'></i> *@
		@* 			<span class="text">Logout</span> *@
		@* 		</a> *@
		@* 	</li> *@
		@* </ul> *@

	</section>
	<!-- SIDEBAR -->
	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
		<nav>
			<i class='bx bx-menu'></i>

			<!-- Positioned Welcome message at the top right -->
			@if (Context.Session.GetString("UserId") != null)
			{
				<a asp-controller="Profile" asp-action="ProfilePage">
					<div class="welcome-message">
						<em>Welcome, </em><strong>@Context.Session.GetString("UserFullName")</strong>
					</div>
				</a>
			}
		</nav>

		<!-- NAVBAR -->
		<section id="container">
			<div class="container">
				<main role="main" class="pb-3">
					@{
						var successMessage = TempData["SuccessMessage"];
						var errorMessage = TempData["ErrorMessage"];
					}

					@if (successMessage != null)
					{
						<div class="alert alert-success">
							@successMessage
						</div>
					}

					@if (errorMessage != null)
					{
						<div class="alert alert-danger">
							@errorMessage
						</div>
					}
					@RenderBody()
				</main>
			</div>
		</section>
	</section>
	<script src="~/lib/jquery/dist/jquery.min.js"></script>
	<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
	<script src="~/js/site.js" asp-append-version="true"></script>

	<script src="~/js/script.js" asp-append-version="true"></script>

	@await RenderSectionAsync("Scripts", required: false)

	<!-- Logout Confirmation Modal -->
	<div id="logoutModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5);">
		<div style="margin: 20% auto; padding: 20px; background: white; width: 300px; text-align: center;">
			<p>Are you sure you want to logout?</p>
			<button onclick="logoutConfirmed()">Yes</button>
			<button onclick="closeModal()">No</button>
		</div>
	</div>


	<script>
				// Function to confirm logout
		function confirmLogout() {
			return confirm('Are you sure you want to log out?'); // Native confirm dialog
		}

		// Function to show the modal and prevent the default link behavior
		// function showModal(event) {
		// 	event.preventDefault(); Prevent the default link click behavior
		// 	document.getElementById('logoutModal').style.display = 'flex'; Show the modal
		// }

		// Function to close the modal
		// function closeModal() {
		// 	document.getElementById('logoutModal').style.display = 'none'; Hide the modal
		// }

		// Function to confirm logout
		// function logoutConfirmed() {
		// 	Redirect to the Logout action
		// window.location.href = '/Logout/Login'; 		}


		// Show/Hide Password
		function togglePasswordVisibility(fieldId, toggleIcon) {
			const passwordField = document.getElementById(fieldId);
			const icon = toggleIcon.querySelector("i");
			if (passwordField.type === "password") {
				passwordField.type = "text";
				icon.classList.remove("bx-hide");
				icon.classList.add("bx-show");
			} else {
				passwordField.type = "password";
				icon.classList.remove("bx-show");
				icon.classList.add("bx-hide");
			}
		}
	</script>

	<script>
		if (performance.navigation.type === 2) { // Detect back button navigation
			location.reload(true); // Force reload to clear cache
		}
	</script>

	<script>
		if (window.performance && window.performance.navigation.type === 2) {
			// If the user navigated using the back button, force a reload
			window.location.reload();
		}
	</script>

</body>
</html>
